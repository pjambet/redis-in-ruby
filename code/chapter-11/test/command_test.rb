require_relative './test_helper'

describe 'COMMAND' do
  it 'describes all the supported commands' do
    assert_command_results [
      # Results from: echo "COMMAND INFO COMMAND DEL GET SET TTL PTTL TYPE LRANGE LPUSH LPUSHX RPUSH RPUSHX LLEN LPOP BLPOP RPOP BRPOP RPOPLPUSH BRPOPLPUSH LTRIM LSET LREM LPOS LINSERT LINDEX HSET HGETALL HDEL HEXISTS HGET HINCRBY HINCRBYFLOAT HKEYS HLEN HMGET HSETNX HSTRLEN HVALS" | nc -c -v localhost 6379  | gsed -E ':a;N;$!ba;s/\r{0,1}\n/\\r\\n/g' | pbcopy
      [ 'COMMAND', "*53\r\n*7\r\n$7\r\ncommand\r\n:-1\r\n*3\r\n+random\r\n+loading\r\n+stale\r\n:0\r\n:0\r\n:0\r\n*2\r\n+@slow\r\n+@connection\r\n*7\r\n$3\r\ndel\r\n:-2\r\n*1\r\n+write\r\n:1\r\n:-1\r\n:1\r\n*3\r\n+@keyspace\r\n+@write\r\n+@slow\r\n*7\r\n$3\r\nget\r\n:2\r\n*2\r\n+readonly\r\n+fast\r\n:1\r\n:1\r\n:1\r\n*3\r\n+@read\r\n+@string\r\n+@fast\r\n*7\r\n$3\r\nset\r\n:-3\r\n*2\r\n+write\r\n+denyoom\r\n:1\r\n:1\r\n:1\r\n*3\r\n+@write\r\n+@string\r\n+@slow\r\n*7\r\n$3\r\nttl\r\n:2\r\n*3\r\n+readonly\r\n+random\r\n+fast\r\n:1\r\n:1\r\n:1\r\n*3\r\n+@keyspace\r\n+@read\r\n+@fast\r\n*7\r\n$4\r\npttl\r\n:2\r\n*3\r\n+readonly\r\n+random\r\n+fast\r\n:1\r\n:1\r\n:1\r\n*3\r\n+@keyspace\r\n+@read\r\n+@fast\r\n*7\r\n$4\r\ntype\r\n:2\r\n*2\r\n+readonly\r\n+fast\r\n:1\r\n:1\r\n:1\r\n*3\r\n+@keyspace\r\n+@read\r\n+@fast\r\n*7\r\n$6\r\nlrange\r\n:4\r\n*1\r\n+readonly\r\n:1\r\n:1\r\n:1\r\n*3\r\n+@read\r\n+@list\r\n+@slow\r\n*7\r\n$5\r\nlpush\r\n:-3\r\n*3\r\n+write\r\n+denyoom\r\n+fast\r\n:1\r\n:1\r\n:1\r\n*3\r\n+@write\r\n+@list\r\n+@fast\r\n*7\r\n$6\r\nlpushx\r\n:-3\r\n*3\r\n+write\r\n+denyoom\r\n+fast\r\n:1\r\n:1\r\n:1\r\n*3\r\n+@write\r\n+@list\r\n+@fast\r\n*7\r\n$5\r\nrpush\r\n:-3\r\n*3\r\n+write\r\n+denyoom\r\n+fast\r\n:1\r\n:1\r\n:1\r\n*3\r\n+@write\r\n+@list\r\n+@fast\r\n*7\r\n$6\r\nrpushx\r\n:-3\r\n*3\r\n+write\r\n+denyoom\r\n+fast\r\n:1\r\n:1\r\n:1\r\n*3\r\n+@write\r\n+@list\r\n+@fast\r\n*7\r\n$4\r\nllen\r\n:2\r\n*2\r\n+readonly\r\n+fast\r\n:1\r\n:1\r\n:1\r\n*3\r\n+@read\r\n+@list\r\n+@fast\r\n*7\r\n$4\r\nlpop\r\n:2\r\n*2\r\n+write\r\n+fast\r\n:1\r\n:1\r\n:1\r\n*3\r\n+@write\r\n+@list\r\n+@fast\r\n*7\r\n$5\r\nblpop\r\n:-3\r\n*2\r\n+write\r\n+noscript\r\n:1\r\n:-2\r\n:1\r\n*4\r\n+@write\r\n+@list\r\n+@slow\r\n+@blocking\r\n*7\r\n$4\r\nrpop\r\n:2\r\n*2\r\n+write\r\n+fast\r\n:1\r\n:1\r\n:1\r\n*3\r\n+@write\r\n+@list\r\n+@fast\r\n*7\r\n$5\r\nbrpop\r\n:-3\r\n*2\r\n+write\r\n+noscript\r\n:1\r\n:-2\r\n:1\r\n*4\r\n+@write\r\n+@list\r\n+@slow\r\n+@blocking\r\n*7\r\n$9\r\nrpoplpush\r\n:3\r\n*2\r\n+write\r\n+denyoom\r\n:1\r\n:2\r\n:1\r\n*3\r\n+@write\r\n+@list\r\n+@slow\r\n*7\r\n$10\r\nbrpoplpush\r\n:4\r\n*3\r\n+write\r\n+denyoom\r\n+noscript\r\n:1\r\n:2\r\n:1\r\n*4\r\n+@write\r\n+@list\r\n+@slow\r\n+@blocking\r\n*7\r\n$5\r\nltrim\r\n:4\r\n*1\r\n+write\r\n:1\r\n:1\r\n:1\r\n*3\r\n+@write\r\n+@list\r\n+@slow\r\n*7\r\n$4\r\nlset\r\n:4\r\n*2\r\n+write\r\n+denyoom\r\n:1\r\n:1\r\n:1\r\n*3\r\n+@write\r\n+@list\r\n+@slow\r\n*7\r\n$4\r\nlrem\r\n:4\r\n*1\r\n+write\r\n:1\r\n:1\r\n:1\r\n*3\r\n+@write\r\n+@list\r\n+@slow\r\n*7\r\n$4\r\nlpos\r\n:-3\r\n*1\r\n+readonly\r\n:1\r\n:1\r\n:1\r\n*3\r\n+@read\r\n+@list\r\n+@slow\r\n*7\r\n$7\r\nlinsert\r\n:5\r\n*2\r\n+write\r\n+denyoom\r\n:1\r\n:1\r\n:1\r\n*3\r\n+@write\r\n+@list\r\n+@slow\r\n*7\r\n$6\r\nlindex\r\n:3\r\n*1\r\n+readonly\r\n:1\r\n:1\r\n:1\r\n*3\r\n+@read\r\n+@list\r\n+@slow\r\n*7\r\n$4\r\nhset\r\n:-4\r\n*3\r\n+write\r\n+denyoom\r\n+fast\r\n:1\r\n:1\r\n:1\r\n*3\r\n+@write\r\n+@hash\r\n+@fast\r\n*7\r\n$7\r\nhgetall\r\n:2\r\n*2\r\n+readonly\r\n+random\r\n:1\r\n:1\r\n:1\r\n*3\r\n+@read\r\n+@hash\r\n+@slow\r\n*7\r\n$4\r\nhdel\r\n:-3\r\n*2\r\n+write\r\n+fast\r\n:1\r\n:1\r\n:1\r\n*3\r\n+@write\r\n+@hash\r\n+@fast\r\n*7\r\n$7\r\nhexists\r\n:3\r\n*2\r\n+readonly\r\n+fast\r\n:1\r\n:1\r\n:1\r\n*3\r\n+@read\r\n+@hash\r\n+@fast\r\n*7\r\n$4\r\nhget\r\n:3\r\n*2\r\n+readonly\r\n+fast\r\n:1\r\n:1\r\n:1\r\n*3\r\n+@read\r\n+@hash\r\n+@fast\r\n*7\r\n$7\r\nhincrby\r\n:4\r\n*3\r\n+write\r\n+denyoom\r\n+fast\r\n:1\r\n:1\r\n:1\r\n*3\r\n+@write\r\n+@hash\r\n+@fast\r\n*7\r\n$12\r\nhincrbyfloat\r\n:4\r\n*3\r\n+write\r\n+denyoom\r\n+fast\r\n:1\r\n:1\r\n:1\r\n*3\r\n+@write\r\n+@hash\r\n+@fast\r\n*7\r\n$5\r\nhkeys\r\n:2\r\n*2\r\n+readonly\r\n+sort_for_script\r\n:1\r\n:1\r\n:1\r\n*3\r\n+@read\r\n+@hash\r\n+@slow\r\n*7\r\n$4\r\nhlen\r\n:2\r\n*2\r\n+readonly\r\n+fast\r\n:1\r\n:1\r\n:1\r\n*3\r\n+@read\r\n+@hash\r\n+@fast\r\n*7\r\n$5\r\nhmget\r\n:-3\r\n*2\r\n+readonly\r\n+fast\r\n:1\r\n:1\r\n:1\r\n*3\r\n+@read\r\n+@hash\r\n+@fast\r\n*7\r\n$6\r\nhsetnx\r\n:4\r\n*3\r\n+write\r\n+denyoom\r\n+fast\r\n:1\r\n:1\r\n:1\r\n*3\r\n+@write\r\n+@hash\r\n+@fast\r\n*7\r\n$7\r\nhstrlen\r\n:3\r\n*2\r\n+readonly\r\n+fast\r\n:1\r\n:1\r\n:1\r\n*3\r\n+@read\r\n+@hash\r\n+@fast\r\n*7\r\n$5\r\nhvals\r\n:2\r\n*2\r\n+readonly\r\n+sort_for_script\r\n:1\r\n:1\r\n:1\r\n*3\r\n+@read\r\n+@hash\r\n+@slow\r\n*7\r\n$4\r\nsadd\r\n:-3\r\n*3\r\n+write\r\n+denyoom\r\n+fast\r\n:1\r\n:1\r\n:1\r\n*3\r\n+@write\r\n+@set\r\n+@fast\r\n*7\r\n$5\r\nscard\r\n:2\r\n*2\r\n+readonly\r\n+fast\r\n:1\r\n:1\r\n:1\r\n*3\r\n+@read\r\n+@set\r\n+@fast\r\n*7\r\n$5\r\nsdiff\r\n:-2\r\n*2\r\n+readonly\r\n+sort_for_script\r\n:1\r\n:-1\r\n:1\r\n*3\r\n+@read\r\n+@set\r\n+@slow\r\n*7\r\n$10\r\nsdiffstore\r\n:-3\r\n*2\r\n+write\r\n+denyoom\r\n:1\r\n:-1\r\n:1\r\n*3\r\n+@write\r\n+@set\r\n+@slow\r\n*7\r\n$6\r\nsinter\r\n:-2\r\n*2\r\n+readonly\r\n+sort_for_script\r\n:1\r\n:-1\r\n:1\r\n*3\r\n+@read\r\n+@set\r\n+@slow\r\n*7\r\n$11\r\nsinterstore\r\n:-3\r\n*2\r\n+write\r\n+denyoom\r\n:1\r\n:-1\r\n:1\r\n*3\r\n+@write\r\n+@set\r\n+@slow\r\n*7\r\n$9\r\nsismember\r\n:3\r\n*2\r\n+readonly\r\n+fast\r\n:1\r\n:1\r\n:1\r\n*3\r\n+@read\r\n+@set\r\n+@fast\r\n*7\r\n$10\r\nsmismember\r\n:-3\r\n*2\r\n+readonly\r\n+fast\r\n:1\r\n:1\r\n:1\r\n*3\r\n+@read\r\n+@set\r\n+@fast\r\n*7\r\n$8\r\nsmembers\r\n:2\r\n*2\r\n+readonly\r\n+sort_for_script\r\n:1\r\n:1\r\n:1\r\n*3\r\n+@read\r\n+@set\r\n+@slow\r\n*7\r\n$5\r\nsmove\r\n:4\r\n*2\r\n+write\r\n+fast\r\n:1\r\n:2\r\n:1\r\n*3\r\n+@write\r\n+@set\r\n+@fast\r\n*7\r\n$4\r\nspop\r\n:-2\r\n*3\r\n+write\r\n+random\r\n+fast\r\n:1\r\n:1\r\n:1\r\n*3\r\n+@write\r\n+@set\r\n+@fast\r\n*7\r\n$11\r\nsrandmember\r\n:-2\r\n*2\r\n+readonly\r\n+random\r\n:1\r\n:1\r\n:1\r\n*3\r\n+@read\r\n+@set\r\n+@slow\r\n*7\r\n$4\r\nsrem\r\n:-3\r\n*2\r\n+write\r\n+fast\r\n:1\r\n:1\r\n:1\r\n*3\r\n+@write\r\n+@set\r\n+@fast\r\n*7\r\n$6\r\nsunion\r\n:-2\r\n*2\r\n+readonly\r\n+sort_for_script\r\n:1\r\n:-1\r\n:1\r\n*3\r\n+@read\r\n+@set\r\n+@slow\r\n*7\r\n$11\r\nsunionstore\r\n:-3\r\n*2\r\n+write\r\n+denyoom\r\n:1\r\n:-1\r\n:1\r\n*3\r\n+@write\r\n+@set\r\n+@slow" ],
    ]
  end
end
